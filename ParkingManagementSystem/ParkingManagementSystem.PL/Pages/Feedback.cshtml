@page
@using ParkingManagementSystem.DAL.Models
@using System.Text.Json
@using ParkingManagementSystemPL.Controllers

@model ParkingManagementSystemPL.Pages.FeedbackModel

@{
    ViewData["Title"] = "Home page";
    var currentUserJson = HttpContext.Session.GetString("CurrentUser");
    var currentUser = !string.IsNullOrEmpty(currentUserJson)
        ? JsonSerializer.Deserialize<User>(currentUserJson)
        : null;
}

@if (currentUser != null)
{
    <script>
        var currentUserData = @Html.Raw(Json.Serialize(currentUser));
    </script>
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>My ASP.NET Core App</title>
    <link rel="stylesheet" href="~/css/site.min.css" />  <!-- Make sure to use the correct path to your generated Tailwind CSS file -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <style>
        .checked {
            color: orange;
        }
    </style>
</head>
<body>
    <div class="w-screen h-screen bg-[url('/assets/background.jpeg')] bg-cover bg-center bg-no-repeat bg-opacity-10">
        <div class="w-screen flex flex-row justify-center items-center text-2xl gap-x-10 pt-16 text-white">
            <a asp-page="/Index" class="group inline-block relative">
                <h1 class="relative z-20">Home</h1>
                <div class="absolute w-full h-0.5 bg-blue-500 transform translate-y-full opacity-0 group-hover:opacity-100 transition-all duration-300 ease-in-out"></div>
            </a>

            <a asp-page="/Lots" class="group inline-block relative">
                <h1 class="relative z-20">Parking Lots</h1>
                <div class="absolute w-full h-0.5 bg-blue-500 transform translate-y-full opacity-0 group-hover:opacity-100 transition-all duration-300 ease-in-out"></div>
            </a>

            @if (currentUser != null)
            {
                <a asp-page="/Dashboard" class="group inline-block relative">
                    <h1 class="relative z-20">Dashboard</h1>
                    <div class="absolute w-full h-0.5 bg-blue-500 transform translate-y-full opacity-0 group-hover:opacity-100 transition-all duration-300 ease-in-out"></div>
                </a>
            }

            <a asp-page="/Feedback" class="group inline-block relative">
                <h1 class="relative z-20">Feedback</h1>
                <div class="absolute w-full h-0.5 bg-blue-500 transform translate-y-full opacity-0 group-hover:opacity-100 transition-all duration-300 ease-in-out"></div>
            </a>

            @if (currentUser != null)
            {
                <button id="logout" class="relative bg-blue-400 rounded-full px-5 py-2 text-white overflow-hidden transition duration-300 ease-in-out text-center transform hover:scale-105 hover:shadow-2xl">
                    <span class="absolute inset-0 bg-gradient-to-r from-blue-400 to-transparent mix-blend-multiply opacity-50 text-center"></span>
                    <span class="relative z-10 text-lg text-center">Log out</span>
                </button>
                <script type="module" src="./js/site.js"></script>
            }
            else
            {
                <a asp-page="/Login" class="inline-block">
                    <button id="login" class="relative bg-blue-400 rounded-full px-5 py-2 text-white overflow-hidden transition duration-300 ease-in-out text-center transform hover:scale-105 hover:shadow-2xl">
                        <span class="absolute inset-0 bg-gradient-to-r from-blue-400 to-transparent mix-blend-multiply opacity-50 text-center"></span>
                        <span class="relative z-10 text-lg text-center">Log in</span>
                    </button>
                </a>
            }
        </div>

        <div class="w-screen flex flex-row items-center justify-center pt-20">
            <div class="w-[50vw] h-[20vh] text-white">
                <h1 class="text-5xl font-bold text-center">Leave a feedback</h1>
                <textarea id="feedback" class="w-full h-40 mt-5 rounded-md border-2 border-gray-300 focus:outline-none text-black resize-none p-3" placeholder="Write your comment here..."></textarea>

                <div class="flex flex-row w-full justify-between items-center">
                    <div>
                        <span data-value="1" class="fa fa-star fa-2x"></span>
                        <span data-value="2" class="fa fa-star fa-2x"></span>
                        <span data-value="3" class="fa fa-star fa-2x"></span>
                        <span data-value="4" class="fa fa-star fa-2x"></span>
                        <span data-value="5" class="fa fa-star fa-2x"></span>
                    </div>

                    @if (currentUser != null)
                    {
                        <button id="submitFeedback" class="relative bg-blue-400 rounded-full px-5 py-2 text-white overflow-hidden transition duration-300 ease-in-out text-center transform hover:scale-105 hover:shadow-2xl">
                            <span class="absolute inset-0 bg-gradient-to-r from-blue-400 to-transparent mix-blend-multiply opacity-50 text-center"></span>
                            <span class="relative z-10 text-lg text-center">Submit Feedback</span>
                        </button>
                    }
                    else
                    {
                        <a asp-page="/Login"><button class="relative bg-blue-400 rounded-full px-5 py-2 text-white overflow-hidden transition duration-300 ease-in-out text-center transform hover:scale-105 hover:shadow-2xl">
                            <span class="absolute inset-0 bg-gradient-to-r from-blue-400 to-transparent mix-blend-multiply opacity-50 text-center"></span>
                            <span class="relative z-10 text-lg text-center">Log in to Submit Feedback</span>
                        </button></a>
                    }
                </div>
            </div>
        </div>

    </div>

    <script src="./lib/jquery/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <script type="module" src="./js/feedback.js"></script>
</body>
</html>